---
dependency:
  name: galaxy
driver:
  name: podman
lint: |
  set -e
  yamllint .
  ansible-lint
platforms:
  - name: db00
    groups:
      - database
      - database_all
    image: registry.redhat.io/rhel8/postgresql-10
    command: /sbin/init
    tmpfs:
      - /run
      - /tmp
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:ro
    privileged: true
    pre_build_image: true
  - name: db01
    groups:
      - database_replica
      - database_all
    image: registry.redhat.io/rhel8/postgresql-10
    command: /sbin/init
    tmpfs:
      - /run
      - /tmp
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:ro
    privileged: true
    pre_build_image: true
provisioner:
  name: ansible
  inventory:
    group_vars:
      database:
        db_server: true
      database_replica:
        db_replica: true
      database_all:
        pgsqlrep_password: foobar
verifier:
  name: ansible
